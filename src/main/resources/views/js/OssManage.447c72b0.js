(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["OssManage"],{"5ff8":function(e,t,l){"use strict";var i=l("bcca"),r=l.n(i);r.a},"61b1":function(e,t,l){"use strict";var i=l("e4dd"),r=l.n(i);r.a},bcca:function(e,t,l){},bfc9:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[e.isShowList?l("div",[l("div",{staticClass:"filter-container"},[l("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleEdit}},[e._v("\n        云存储配置\n      ")]),l("el-upload",{staticClass:"upload-demo",attrs:{action:e.ossUrl,"show-file-list":!1,"on-success":e.onSuccess,multiple:""}},[l("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-upload"}},[e._v("\n          上传文件\n        ")])],1),l("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.handleDelete}},[e._v("\n        "+e._s(e.$t("common.delete"))+"\n      ")])],1),l("table-list",{attrs:{data:e.list,columns:e.columns,"row-key":e.idKey},on:{handleSortChange:e.handleSortChange,handleSelectionChange:e.handleSelectionChange},scopedSlots:e._u([{key:"url",fn:function(t){return[l("div",[e._v("\n          "+e._s(t.row.url)+"\n        ")])]}}],null,!1,913508922)}),l("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}})],1):l("div",[l("el-tabs",{attrs:{type:"border-card"}},[l("el-tab-pane",{attrs:{label:e.tabLabel}},[l("edit",{attrs:{type:e.type},on:{"msg-from-child":e.getMsgFromChild}})],1)],1)],1)])},r=[],n=l("b0b4"),o=l("d225"),a=l("308d"),c=l("6bb5"),u=l("4e2b"),s=l("9ab4"),m=l("60a3"),d=l("0bfbe"),y=l("333d"),p=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"存储类型",prop:"type"}},[l("el-radio-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[l("el-radio",{attrs:{label:0}},[e._v("\n          拓胜云\n        ")]),l("el-radio",{attrs:{label:1}},[e._v("\n          七牛\n        ")]),l("el-radio",{attrs:{label:2}},[e._v("\n          阿里云\n        ")]),l("el-radio",{attrs:{label:3}},[e._v("\n          腾讯云\n        ")])],1)],1),0===e.ruleForm.type?[l("el-form-item",{attrs:{label:"域名"}},[l("el-input",{attrs:{placeholder:"拓胜云绑定的域名"},model:{value:e.ruleForm.minioDomain,callback:function(t){e.$set(e.ruleForm,"minioDomain",t)},expression:"ruleForm.minioDomain"}})],1),l("el-form-item",{attrs:{label:"路径前缀"}},[l("el-input",{attrs:{placeholder:"不设置默认为空"},model:{value:e.ruleForm.minioPrefix,callback:function(t){e.$set(e.ruleForm,"minioPrefix",t)},expression:"ruleForm.minioPrefix"}})],1),l("el-form-item",{attrs:{label:"AccessKey"}},[l("el-input",{attrs:{placeholder:"拓胜云AccessKey"},model:{value:e.ruleForm.minioAccessKey,callback:function(t){e.$set(e.ruleForm,"minioAccessKey",t)},expression:"ruleForm.minioAccessKey"}})],1),l("el-form-item",{attrs:{label:"SecretKey"}},[l("el-input",{attrs:{placeholder:"拓胜云SecretKey"},model:{value:e.ruleForm.minioSecretKey,callback:function(t){e.$set(e.ruleForm,"minioSecretKey",t)},expression:"ruleForm.minioSecretKey"}})],1),l("el-form-item",{attrs:{label:"存储空间名"}},[l("el-input",{attrs:{placeholder:"拓胜云存储空间名"},model:{value:e.ruleForm.minioBucketName,callback:function(t){e.$set(e.ruleForm,"minioBucketName",t)},expression:"ruleForm.minioBucketName"}})],1)]:e._e(),1===e.ruleForm.type?[l("el-form-item",{attrs:{label:"域名"}},[l("el-input",{attrs:{placeholder:"七牛绑定的域名"},model:{value:e.ruleForm.qiniuDomain,callback:function(t){e.$set(e.ruleForm,"qiniuDomain",t)},expression:"ruleForm.qiniuDomain"}})],1),l("el-form-item",{attrs:{label:"路径前缀"}},[l("el-input",{attrs:{placeholder:"不设置默认为空"},model:{value:e.ruleForm.qiniuPrefix,callback:function(t){e.$set(e.ruleForm,"qiniuPrefix",t)},expression:"ruleForm.qiniuPrefix"}})],1),l("el-form-item",{attrs:{label:"AccessKey"}},[l("el-input",{attrs:{placeholder:"七牛AccessKey"},model:{value:e.ruleForm.qiniuAccessKey,callback:function(t){e.$set(e.ruleForm,"qiniuAccessKey",t)},expression:"ruleForm.qiniuAccessKey"}})],1),l("el-form-item",{attrs:{label:"SecretKey"}},[l("el-input",{attrs:{placeholder:"七牛SecretKey"},model:{value:e.ruleForm.qiniuSecretKey,callback:function(t){e.$set(e.ruleForm,"qiniuSecretKey",t)},expression:"ruleForm.qiniuSecretKey"}})],1),l("el-form-item",{attrs:{label:"存储空间名"}},[l("el-input",{attrs:{placeholder:"七牛存储空间名"},model:{value:e.ruleForm.qiniuBucketName,callback:function(t){e.$set(e.ruleForm,"qiniuBucketName",t)},expression:"ruleForm.qiniuBucketName"}})],1)]:2===e.ruleForm.type?[l("el-form-item",{attrs:{label:"域名"}},[l("el-input",{attrs:{placeholder:"阿里云绑定的域名"},model:{value:e.ruleForm.aliyunDomain,callback:function(t){e.$set(e.ruleForm,"aliyunDomain",t)},expression:"ruleForm.aliyunDomain"}})],1),l("el-form-item",{attrs:{label:"路径前缀"}},[l("el-input",{attrs:{placeholder:"不设置默认为空"},model:{value:e.ruleForm.aliyunPrefix,callback:function(t){e.$set(e.ruleForm,"aliyunPrefix",t)},expression:"ruleForm.aliyunPrefix"}})],1),l("el-form-item",{attrs:{label:"EndPoint"}},[l("el-input",{attrs:{placeholder:"阿里云EndPoint"},model:{value:e.ruleForm.aliyunEndPoint,callback:function(t){e.$set(e.ruleForm,"aliyunEndPoint",t)},expression:"ruleForm.aliyunEndPoint"}})],1),l("el-form-item",{attrs:{label:"AccessKeyId"}},[l("el-input",{attrs:{placeholder:"阿里云AccessKeyId"},model:{value:e.ruleForm.aliyunAccessKeyId,callback:function(t){e.$set(e.ruleForm,"aliyunAccessKeyId",t)},expression:"ruleForm.aliyunAccessKeyId"}})],1),l("el-form-item",{attrs:{label:"AccessKeySecret"}},[l("el-input",{attrs:{placeholder:"阿里云AccessKeySecret"},model:{value:e.ruleForm.aliyunAccessKeySecret,callback:function(t){e.$set(e.ruleForm,"aliyunAccessKeySecret",t)},expression:"ruleForm.aliyunAccessKeySecret"}})],1),l("el-form-item",{attrs:{label:"BucketName"}},[l("el-input",{attrs:{placeholder:"阿里云BucketName"},model:{value:e.ruleForm.aliyunBucketName,callback:function(t){e.$set(e.ruleForm,"aliyunBucketName",t)},expression:"ruleForm.aliyunBucketName"}})],1)]:3===e.ruleForm.type?[l("el-form-item",{attrs:{label:"域名"}},[l("el-input",{attrs:{placeholder:"腾讯云绑定的域名"},model:{value:e.ruleForm.qcloudDomain,callback:function(t){e.$set(e.ruleForm,"qcloudDomain",t)},expression:"ruleForm.qcloudDomain"}})],1),l("el-form-item",{attrs:{label:"路径前缀"}},[l("el-input",{attrs:{placeholder:"不设置默认为空"},model:{value:e.ruleForm.qcloudPrefix,callback:function(t){e.$set(e.ruleForm,"qcloudPrefix",t)},expression:"ruleForm.qcloudPrefix"}})],1),l("el-form-item",{attrs:{label:"AppId"}},[l("el-input",{attrs:{placeholder:"腾讯云AppId"},model:{value:e.ruleForm.qcloudAppId,callback:function(t){e.$set(e.ruleForm,"qcloudAppId",t)},expression:"ruleForm.qcloudAppId"}})],1),l("el-form-item",{attrs:{label:"SecretId"}},[l("el-input",{attrs:{placeholder:"腾讯云SecretId"},model:{value:e.ruleForm.qcloudSecretId,callback:function(t){e.$set(e.ruleForm,"qcloudSecretId",t)},expression:"ruleForm.qcloudSecretId"}})],1),l("el-form-item",{attrs:{label:"SecretKey"}},[l("el-input",{attrs:{placeholder:"腾讯云SecretKey"},model:{value:e.ruleForm.qcloudSecretKey,callback:function(t){e.$set(e.ruleForm,"qcloudSecretKey",t)},expression:"ruleForm.qcloudSecretKey"}})],1),l("el-form-item",{attrs:{label:"BucketName"}},[l("el-input",{attrs:{placeholder:"腾讯云BucketName"},model:{value:e.ruleForm.qcloudBucketName,callback:function(t){e.$set(e.ruleForm,"qcloudBucketName",t)},expression:"ruleForm.qcloudBucketName"}})],1),l("el-form-item",{attrs:{label:"Bucket所属地区"}},[l("el-input",{attrs:{placeholder:"如：sh（可选值 ，华南：gz 华北：tj 华东：sh）"},model:{value:e.ruleForm.qcloudRegion,callback:function(t){e.$set(e.ruleForm,"qcloudRegion",t)},expression:"ruleForm.qcloudRegion"}})],1)]:e._e(),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("\n        "+e._s(e.$t("common.comfirm"))+"\n      ")]),l("el-button",{on:{click:e.cancel}},[e._v("\n        "+e._s(e.$t("common.cancel"))+"\n      ")])],1)],2)],1)},f=[],h=l("b32d");function b(e){return Object(h["a"])({url:"/sys/oss/list",method:"get",params:e})}function F(){return Object(h["a"])({url:"/sys/oss/config",method:"get"})}function v(e){return Object(h["a"])({url:"/sys/oss/saveConfig",method:"post",data:e})}function k(e){return Object(h["a"])({url:"/sys/oss/delete",method:"delete",data:e})}var q=function(){function e(){Object(o["a"])(this,e),this.type=0,this.aliyunAccessKeyId="",this.aliyunAccessKeySecret="",this.aliyunBucketName="",this.aliyunDomain="",this.aliyunEndPoint="",this.aliyunPrefix="",this.minioAccessKey="",this.minioBucketName="",this.minioDomain="",this.minioPrefix="",this.minioSecretKey="",this.qcloudAppId=0,this.qcloudBucketName="",this.qcloudDomain="",this.qcloudPrefix="",this.qcloudRegion="",this.qcloudSecretId="",this.qcloudSecretKey="",this.qiniuAccessKey="",this.qiniuBucketName="",this.qiniuDomain="",this.qiniuPrefix="",this.qiniuSecretKey=""}return Object(n["a"])(e,null,[{key:"build",value:function(t){var l=new e;return l.type=t.type,l.aliyunAccessKeyId=t.aliyunAccessKeyId,l.aliyunAccessKeySecret=t.aliyunAccessKeySecret,l.aliyunBucketName=t.aliyunBucketName,l.aliyunDomain=t.aliyunDomain,l.aliyunEndPoint=t.aliyunEndPoint,l.aliyunPrefix=t.aliyunPrefix,l.minioAccessKey=t.minioAccessKey,l.minioBucketName=t.minioBucketName,l.minioDomain=t.minioDomain,l.minioPrefix=t.minioPrefix,l.minioSecretKey=t.minioSecretKey,l.qcloudAppId=t.qcloudAppId,l.qcloudBucketName=t.qcloudBucketName,l.qcloudDomain=t.qcloudDomain,l.qcloudPrefix=t.qcloudPrefix,l.qcloudRegion=t.qcloudRegion,l.qcloudSecretId=t.qcloudSecretId,l.qcloudSecretKey=t.qcloudSecretKey,l.qiniuAccessKey=t.qiniuAccessKey,l.qiniuBucketName=t.qiniuBucketName,l.qiniuDomain=t.qiniuDomain,l.qiniuPrefix=t.qiniuPrefix,l.qiniuSecretKey=t.qiniuSecretKey,l}}]),e}(),S=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(a["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.ruleForm={},e.rules={},e}return Object(u["a"])(t,e),Object(n["a"])(t,[{key:"created",value:function(){"edit"===this.type&&this.getConfig()}},{key:"submitForm",value:function(e){var t=this,l=this.$refs[e];l.validate(function(e){if(!e)return console.log("error submit!!"),!1;"edit"===t.type?t.handleEdit():t.handleSubmit()})}},{key:"handleSubmit",value:function(){var e=this;v(this.ruleForm).then(function(t){e.$emit("msg-from-child",e.type)})}},{key:"handleEdit",value:function(){var e=this;v(this.ruleForm).then(function(t){e.$emit("msg-from-child",e.type)})}},{key:"cancel",value:function(){this.$emit("msg-from-child","cancel")}},{key:"getConfig",value:function(){var e=this;F().then(function(t){var l=t.config;e.ruleForm=q.build(l)})}}]),t}(m["c"]);s["a"]([Object(m["b"])({default:"save"})],S.prototype,"type",void 0),S=s["a"]([Object(m["a"])({name:"OssEdit"})],S);var x=S,K=x,g=l("2877"),A=Object(g["a"])(K,p,f,!1,null,null,null),$=A.exports,P=l("27cf"),B=l("1162"),N=l("c119"),D=l("c0c7"),O=l("6ac5"),w=l("482f"),j=(B["a"],function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(a["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.isShowList=!0,e.listQuery=new P["a"],e.list=[],e.newList=[],e.columns=[{label:"ID",key:"id",width:100},{label:"url",key:"url",slot:"url"},{label:"创建时间",key:"createDate",width:180}],e.total=0,e.type="",e.id="0",e.multipleSelection=[],e.idKey="id",e.ossUrl="",e}return Object(u["a"])(t,e),Object(n["a"])(t,[{key:"created",value:function(){this.ossUrl=w["a"]+"/sys/oss/upload?token="+Object(O["a"])(),this.getList()}},{key:"getList",value:function(){var e=this;b(this.listQuery).then(function(t){var l=t.page;e.list=l.list,e.total=l.totalCount,e.newList=e.list.map(function(t){return t[e.idKey]});var i=document.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];Object(D["a"])(i,e.list,e.newList)})}},{key:"handleFilter",value:function(){this.listQuery._search=!0,this.listQuery.page=1,this.getList()}},{key:"handleEdit",value:function(){this.type="edit",this.isShowList=!1}},{key:"handleDelete",value:function(){var e=this;Object(N["a"])(this.multipleSelection).then(function(){e.$confirm("是否确定删除该数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];e.multipleSelection.map(function(l){t.push(l[e.idKey])}),k(t).then(function(t){e.$message({type:"success",message:"删除成功!"}),e.handleFilter()})}).catch(function(){})})}},{key:"handleSortChange",value:function(e){void 0!==e.sidx&&(this.listQuery.sidx=e.sidx),this.listQuery.order=e.order,this.handleFilter()}},{key:"handleSelectionChange",value:function(e){this.multipleSelection=e}},{key:"getMsgFromChild",value:function(e){"cancel"!==e&&this.handleFilter(),this.isShowList=!0}},{key:"onSuccess",value:function(e){500===e.code?this.$alert(e.msg):this.getList()}},{key:"tabLabel",get:function(){return"edit"===this.type?this.$t("common.edit"):this.$t("common.create")}}]),t}(m["c"]));j=s["a"]([Object(m["a"])({name:"OssManage",components:{TableList:d["a"],Pagination:y["a"],Edit:$}})],j);var I=j,_=I,C=(l("5ff8"),l("61b1"),Object(g["a"])(_,i,r,!1,null,"5d46a729",null));t["default"]=C.exports},e4dd:function(e,t,l){}}]);
//# sourceMappingURL=OssManage.447c72b0.js.map