(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SyslisenceManage"],{bba0:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[e.isShowList?l("div",[l("div",{staticClass:"filter-container"},[l("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.nd,callback:function(t){e.$set(e.listQuery,"nd",t)},expression:"listQuery.nd"}}),l("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"2px"},attrs:{icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("\n        "+e._s(e.$t("common.search"))+"\n      ")]),l("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("\n        "+e._s(e.$t("common.create"))+"\n      ")]),l("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleEdit}},[e._v("\n        "+e._s(e.$t("common.edit"))+"\n      ")]),l("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.handleDelete}},[e._v("\n        "+e._s(e.$t("common.delete"))+"\n      ")]),l("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary"},on:{click:e.handleGrant}},[e._v("\n        授权\n      ")])],1),l("table-list",{attrs:{data:e.list,columns:e.columns,"row-key":e.idKey},on:{handleSortChange:e.handleSortChange,handleSelectionChange:e.handleSelectionChange}}),l("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}})],1):l("div",[l("el-tabs",{attrs:{type:"border-card"}},[l("el-tab-pane",{attrs:{label:e.tabLabel}},[l("edit",{attrs:{id:e.id,type:e.type},on:{"msg-from-child":e.getMsgFromChild}})],1)],1)],1)])},a=[],r=l("b0b4"),n=l("d225"),s=l("308d"),o=l("6bb5"),u=l("4e2b"),c=l("9ab4"),m=l("60a3"),d=l("0bfbe"),y=l("333d"),p=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"私钥"}},[l("el-input",{attrs:{placeholder:"私钥"},model:{value:e.ruleForm.privatekey,callback:function(t){e.$set(e.ruleForm,"privatekey",t)},expression:"ruleForm.privatekey"}})],1),l("el-form-item",{attrs:{label:"公钥"}},[l("el-input",{attrs:{placeholder:"公钥"},model:{value:e.ruleForm.publickey,callback:function(t){e.$set(e.ruleForm,"publickey",t)},expression:"ruleForm.publickey"}})],1),l("el-form-item",{attrs:{label:"私钥2"}},[l("el-input",{attrs:{placeholder:"私钥2"},model:{value:e.ruleForm.privatekey2,callback:function(t){e.$set(e.ruleForm,"privatekey2",t)},expression:"ruleForm.privatekey2"}})],1),l("el-form-item",{attrs:{label:"公钥2"}},[l("el-input",{attrs:{placeholder:"公钥2"},model:{value:e.ruleForm.publickey2,callback:function(t){e.$set(e.ruleForm,"publickey2",t)},expression:"ruleForm.publickey2"}})],1),l("el-form-item",{attrs:{label:"系统唯一标识"}},[l("el-input",{attrs:{placeholder:"系统唯一标识"},model:{value:e.ruleForm.systemuid,callback:function(t){e.$set(e.ruleForm,"systemuid",t)},expression:"ruleForm.systemuid"}})],1),l("el-form-item",{attrs:{label:"授权key"}},[l("el-input",{attrs:{placeholder:"授权key"},model:{value:e.ruleForm.signkey,callback:function(t){e.$set(e.ruleForm,"signkey",t)},expression:"ruleForm.signkey"}})],1),l("el-form-item",{attrs:{label:"申请日期"}},[l("el-input",{attrs:{placeholder:"申请日期"},model:{value:e.ruleForm.applydate,callback:function(t){e.$set(e.ruleForm,"applydate",t)},expression:"ruleForm.applydate"}})],1),l("el-form-item",{attrs:{label:"授权日期"}},[l("el-input",{attrs:{placeholder:"授权日期"},model:{value:e.ruleForm.grantdate,callback:function(t){e.$set(e.ruleForm,"grantdate",t)},expression:"ruleForm.grantdate"}})],1),l("el-form-item",{attrs:{label:"使用类型"}},[l("el-input",{attrs:{placeholder:"使用类型：dev开发，pro生成"},model:{value:e.ruleForm.usingtype,callback:function(t){e.$set(e.ruleForm,"usingtype",t)},expression:"ruleForm.usingtype"}})],1),l("el-form-item",{attrs:{label:"服务器IP"}},[l("el-input",{attrs:{placeholder:"服务器IP"},model:{value:e.ruleForm.serverHost,callback:function(t){e.$set(e.ruleForm,"serverHost",t)},expression:"ruleForm.serverHost"}})],1),l("el-form-item",{attrs:{label:"系统名称"}},[l("el-input",{attrs:{placeholder:"系统名称"},model:{value:e.ruleForm.systemName,callback:function(t){e.$set(e.ruleForm,"systemName",t)},expression:"ruleForm.systemName"}})],1),l("el-form-item",{attrs:{label:"授权期限"}},[l("el-input",{attrs:{placeholder:"授权期限"},model:{value:e.ruleForm.dueDays,callback:function(t){e.$set(e.ruleForm,"dueDays",t)},expression:"ruleForm.dueDays"}})],1),l("el-form-item",{attrs:{label:"服务完整URL"}},[l("el-input",{attrs:{placeholder:"服务完整URL"},model:{value:e.ruleForm.serverUrl,callback:function(t){e.$set(e.ruleForm,"serverUrl",t)},expression:"ruleForm.serverUrl"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("\n        "+e._s(e.$t("common.comfirm"))+"\n      ")]),l("el-button",{on:{click:e.cancel}},[e._v("\n        "+e._s(e.$t("common.cancel"))+"\n      ")])],1)],1)],1)},h=[],b=l("b32d");function v(e){return Object(b["a"])({url:"/sys/syslisence",method:"get",params:e})}function f(e){return Object(b["a"])({url:"/sys/syslisence",method:"post",data:e})}function k(e){var t="/sys/syslisence/"+e;return Object(b["a"])({url:t,method:"get"})}function g(e){return Object(b["a"])({url:"/sys/syslisence",method:"put",data:e})}function F(e){return Object(b["a"])({url:"/sys/syslisence",method:"delete",data:e})}function O(e,t){return Object(b["a"])({url:"/sys/syslisence/grant/"+e,method:"put",params:t})}var $=function(){function e(){Object(n["a"])(this,e),this.lisenceId="",this.privatekey="",this.publickey="",this.privatekey2="",this.publickey2="",this.systemuid="",this.signkey="",this.applydate="",this.grantdate="",this.usingtype="",this.serverHost="",this.systemName="",this.dueDays=0,this.serverUrl=""}return Object(r["a"])(e,null,[{key:"build",value:function(t){var l=new e;return l.lisenceId=t.lisenceId,l.privatekey=t.privatekey,l.publickey=t.publickey,l.privatekey2=t.privatekey2,l.publickey2=t.publickey2,l.systemuid=t.systemuid,l.signkey=t.signkey,l.applydate=t.applydate,l.grantdate=t.grantdate,l.usingtype=t.usingtype,l.serverHost=t.serverHost,l.systemName=t.systemName,l.dueDays=t.dueDays,l.serverUrl=t.serverUrl,l}}]),e}(),j=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(s["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.ruleForm=new $,e.rules={key:[{required:!0,message:"请输入参数名称",trigger:"blur"}],value:[{required:!0,message:"请输入参数值",trigger:"blur"}]},e}return Object(u["a"])(t,e),Object(r["a"])(t,[{key:"created",value:function(){"edit"===this.type&&this.getEditInfo()}},{key:"submitForm",value:function(e){var t=this,l=this.$refs[e];l.validate(function(e){if(!e)return console.log("error submit!!"),!1;"edit"===t.type?t.handleEdit():t.handleSubmit()})}},{key:"handleSubmit",value:function(){var e=this;f(this.ruleForm).then(function(t){e.$emit("msg-from-child",e.type)})}},{key:"handleEdit",value:function(){var e=this;g(this.ruleForm).then(function(t){e.$emit("msg-from-child",e.type)})}},{key:"cancel",value:function(){this.$emit("msg-from-child","cancel")}},{key:"getEditInfo",value:function(){var e=this;k(this.id).then(function(t){var l=t.sysLisence;e.ruleForm=$.build(l)}).catch(function(e){console.log(e)})}}]),t}(m["c"]);c["a"]([Object(m["b"])()],j.prototype,"id",void 0),c["a"]([Object(m["b"])({default:"save"})],j.prototype,"type",void 0),j=c["a"]([Object(m["a"])({name:"SyslisenceEdit"})],j);var w=j,S=w,x=l("2877"),C=Object(x["a"])(S,p,h,!1,null,null,null),_=C.exports,L=l("27cf"),Q=l("1162"),I=l("c119"),D=l("c0c7"),E=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(s["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.nd="",e}return Object(u["a"])(t,e),t}(L["a"]),N=(Q["a"],function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(s["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.isShowList=!0,e.listQuery=new E,e.list=[],e.newList=[],e.columns=[{label:"lisenceId",key:"lisenceId"},{label:"私钥",key:"privatekey"},{label:"公钥",key:"publickey"},{label:"私钥2",key:"privatekey2"},{label:"公钥2",key:"publickey2"},{label:"系统唯一标识",key:"systemuid"},{label:"授权key",key:"signkey"},{label:"申请日期",key:"applydate"},{label:"授权日期",key:"grantdate"},{label:"使用类型",key:"usingtype"},{label:"服务器IP",key:"serverHost"},{label:"系统名称",key:"systemName"},{label:"授权期限",key:"dueDays"},{label:"服务完整URL",key:"serverUrl"}],e.total=0,e.type="",e.id="0",e.multipleSelection=[],e.idKey="lisenceId",e}return Object(u["a"])(t,e),Object(r["a"])(t,[{key:"created",value:function(){this.getList()}},{key:"getList",value:function(){var e=this;v(this.listQuery).then(function(t){var l=t.page;e.list=l.list,e.total=l.totalCount,e.newList=e.list.map(function(t){return t[e.idKey]});var i=document.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];Object(D["a"])(i,e.list,e.newList)})}},{key:"handleFilter",value:function(){this.listQuery._search=!0,this.listQuery.page=1,this.getList()}},{key:"handleCreate",value:function(){this.type="save",this.isShowList=!1}},{key:"handleEdit",value:function(){var e=this;Object(I["a"])(this.multipleSelection,"one").then(function(){e.id=e.multipleSelection[0][e.idKey],e.type="edit",e.isShowList=!1})}},{key:"handleDelete",value:function(){var e=this;Object(I["a"])(this.multipleSelection).then(function(){e.$confirm("是否确定删除该数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];e.multipleSelection.map(function(l){t.push(l[e.idKey])}),F(t).then(function(t){e.$message({type:"success",message:"删除成功!"}),e.handleFilter()})}).catch(function(){})})}},{key:"handleSortChange",value:function(e){void 0!==e.sidx&&(this.listQuery.sidx=e.sidx),this.listQuery.order=e.order,this.handleFilter()}},{key:"handleSelectionChange",value:function(e){this.multipleSelection=e}},{key:"getMsgFromChild",value:function(e){"cancel"!==e&&this.handleFilter(),this.isShowList=!0}},{key:"handleGrant",value:function(){var e=this;Object(I["a"])(this.multipleSelection,"one").then(function(){var t={dueDays:e.multipleSelection[0].dueDays};O(e.multipleSelection[0].lisenceId,t).then(function(t){0===t.code&&(e.$alert("授权成功"),e.handleFilter())})})}},{key:"tabLabel",get:function(){return"edit"===this.type?this.$t("common.edit"):this.$t("common.create")}}]),t}(m["c"]));N=c["a"]([Object(m["a"])({name:"SyslisenceManage",components:{TableList:d["a"],Pagination:y["a"],Edit:_}})],N);var U=N,H=U,K=Object(x["a"])(H,i,a,!1,null,null,null);t["default"]=K.exports}}]);
//# sourceMappingURL=SyslisenceManage.dd3e39c0.js.map